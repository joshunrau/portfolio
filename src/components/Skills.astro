---
import skillsIcon from "@/assets/skills-filler.svg";
import Section from "@/layouts/Section.astro";
import Skill from "./Skill.astro";

import javascript from "@/assets/javascript.svg";
import linux from "@/assets/linux.svg";
import react from "@/assets/react.svg";
import python from "@/assets/python.svg";
import typescript from "@/assets/typescript.svg";
import css from "@/assets/css.svg";
import html from "@/assets/html.svg";
import mongodb from "@/assets/mongodb.svg";
import nextjs from "@/assets/nextjs.svg";
import docker from "@/assets/docker.svg";
---

<Section image={{ alt: "placeholder", meta: skillsIcon }}>
  <h1>Skills</h1>
  <div class="flex w-full flex-wrap" id="skills-showcase">
    <Skill label="HTML" icon={html} />
    <Skill label="CSS" icon={css} />
    <Skill label="JavaScript" icon={javascript} />
    <Skill label="TypeScript" icon={typescript} />
    <Skill label="React" icon={react} />
    <Skill label="Next.js" icon={nextjs} />
    <Skill label="MongoDB" icon={mongodb} />
    <Skill label="Python" icon={python} />
    <Skill label="Linux" icon={linux} />
    <Skill label="Docker" icon={docker} />
  </div>
</Section>
<script>
  const container = document.getElementById("skills-showcase")!;
  const skillIcons = container.querySelectorAll("div > img");
  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        observer.disconnect();
        for (let i = 0; i < skillIcons.length; i++) {
          setTimeout(() => {
            skillIcons.item(i).classList.replace("opacity-0", "opacity-100");
            skillIcons.item(i).classList.replace("scale-0", "scale-100");
          }, i * 100);
        }
      }
    });
  });
  observer.observe(container);
</script>
